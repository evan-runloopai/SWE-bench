{
    "dockerfile": "FROM runloopdocker:TODOFIXTHIS\nARG DEBIAN_FRONTEND=noninteractive\nENV TZ=Etc/UTC\n\nRUN apt update && apt install -y \\\nwget \\\ngit \\\nbuild-essential \\\nlibffi-dev \\\nlibtiff-dev \\\npython3 \\\npython3-pip \\\npython-is-python3 \\\njq \\\ncurl \\\nlocales \\\nlocales-all \\\ntzdata \\\n&& rm -rf /var/lib/apt/lists/*\n\n# Download and install conda\nRUN wget 'https://repo.anaconda.com/miniconda/Miniconda3-py311_23.11.0-2-Linux-aarch64.sh' -O miniconda.sh \\\n    && bash miniconda.sh -b -p /opt/miniconda3\n# Add conda to PATH\nENV PATH=/opt/miniconda3/bin:$PATH\n# Add conda to shell startup scripts like .bashrc (DO NOT REMOVE THIS)\nRUN conda init --all\nRUN conda config --append channels conda-forge\n\nRUN adduser --disabled-password --gecos 'dog' nonroot\n\nCOPY ./setup_env.sh /root/\nRUN chmod +x /root/setup_env.sh\nRUN /bin/bash -c \"source ~/.bashrc && /root/setup_env.sh\"\n\nWORKDIR /testbed/\n\n# Automatically activate the testbed environment\nRUN echo \"source /opt/miniconda3/etc/profile.d/conda.sh && conda activate testbed\" > /root/.bashrc\n\nCOPY ./setup_repo.sh /root/\nRUN /bin/bash /root/setup_repo.sh\n\nWORKDIR /testbed/\n",
    "fileMounts": {
        "setup_env.sh": "#!/bin/bash\nset -euxo pipefail\nsource /opt/miniconda3/bin/activate\nconda create -n testbed python=3.9 mpmath flake8 -y\nconda activate testbed\npython -m pip install mpmath==1.3.0 flake8-comprehensions\n",
        "setup_repo.sh": "#!/bin/bash\nset -euxo pipefail\ngit clone -o origin https://github.com/sympy/sympy /testbed\nchmod -R 777 /testbed\ncd /testbed\ngit reset --hard cffd4e0f86fefd4802349a9f9b19ed70934ea354\ngit remote remove origin\nsource /opt/miniconda3/bin/activate\nconda activate testbed\necho \"Current environment: $CONDA_DEFAULT_ENV\"\npython -m pip install -e .\n"
    }
}